# نظام إدارة المستخدمين - أكاديمية الشرق

## نظرة عامة
تم تطبيق نظام شامل لإدارة المستخدمين والتنقل بين الصفحات في موقع أكاديمية الشرق.

## الميزات المطبقة

### 1. 🔐 نظام إدارة الحالة (AuthContext)
- **ملف**: `src/context/AuthContext.tsx`
- **الميزات**:
  - إدارة حالة المستخدم (تسجيل دخول/خروج)
  - حفظ بيانات المستخدم في localStorage
  - أنواع المستخدمين: طالب، معلم، إداري، زائر
  - تحديث بيانات المستخدم
  - Hook مخصص للاستخدام (`useAuth`)

### 2. 🎓 صفحة تسجيل الدخول للزوار
- **ملف**: `pages/VisitorLogin.tsx`
- **الميزات**:
  - واجهة تسجيل دخول جميلة ومتجاوبة
  - اختيار نوع المستخدم (طالب/معلم)
  - نموذج تسجيل دخول مع التحقق
  - Loading states
  - Animations وtransitions
  - التوجه التلقائي للصفحة المناسبة

### 3. 📊 لوحات التحكم
- **ملفات**: 
  - `pages/StudentDashboard.tsx` - لوحة الطالب
  - `pages/TeacherDashboard.tsx` - لوحة المعلم
- **الميزات**:
  - واجهات مخصصة لكل نوع مستخدم
  - إحصائيات سريعة
  - ميزات متخصصة لكل دور
  - نظام تسجيل خروج
  - تصميم متجاوب وجميل

### 4. 🧭 نظام التنقل المحسن
- **ملف**: `components/Header.tsx`
- **الميزات**:
  - عرض حالة المستخدم المسجل دخوله
  - أزرار تسجيل دخول/خروج ديناميكية
  - التنقل السلس بين الصفحات
  - Scroll إلى الأقسام
  - رابط "الحياة الطلابية" يوجه لصفحة تسجيل الدخول

### 5. 🏠 التطبيق الرئيسي
- **ملف**: `App.tsx`
- **الميزات**:
  - AuthProvider يحيط بالتطبيق
  - Routes محدثة للصفحات الجديدة
  - التنقل بين الصفحات
  - الصفحة الرئيسية تفتح افتراضياً

## تدفق المستخدم

### 1. الزائر الجديد
```
الصفحة الرئيسية → النقر على "الحياة الطلابية" → صفحة تسجيل الدخول → اختيار نوع المستخدم → ملء البيانات → تسجيل الدخول → التوجه للوحة المناسبة
```

### 2. المستخدم المسجل دخوله
```
الصفحة الرئيسية → عرض اسم المستخدم في Header → إمكانية تسجيل الخروج → العودة للصفحة الرئيسية
```

### 3. تسجيل الخروج
```
أي صفحة → النقر على "تسجيل الخروج" → العودة للصفحة الرئيسية → إزالة بيانات المستخدم
```

## أنواع المستخدمين

### 🎓 الطالب
- **الوصول**: `/student-dashboard`
- **الميزات**:
  - الجدول الدراسي
  - متابعة الدرجات
  - الواجبات
  - المواد الدراسية
  - الأنشطة
  - التواصل

### 👨‍🏫 المعلم
- **الوصول**: `/teacher-dashboard`
- **الميزات**:
  - إدارة الطلاب
  - تسجيل الدرجات
  - إنشاء الواجبات
  - إدارة المواد
  - التقارير
  - التواصل

## الملفات الجديدة

### Context
- `src/context/AuthContext.tsx` - نظام إدارة الحالة

### Pages
- `pages/VisitorLogin.tsx` - صفحة تسجيل الدخول
- `pages/StudentDashboard.tsx` - لوحة الطالب
- `pages/TeacherDashboard.tsx` - لوحة المعلم

### Updated Files
- `components/Header.tsx` - Header محدث
- `App.tsx` - التطبيق الرئيسي محدث
- `components/About.tsx` - إضافة ID للتنقل
- `components/Departments.tsx` - إضافة ID للتنقل
- `components/Contact.tsx` - إضافة ID للتنقل

## كيفية الاستخدام

### 1. تسجيل الدخول
```tsx
import { useAuth } from './src/context/AuthContext';

const { login } = useAuth();

const userData = {
  id: '123',
  name: 'أحمد محمد',
  email: 'ahmed@example.com',
  type: 'student'
};

login(userData);
```

### 2. تسجيل الخروج
```tsx
import { useAuth } from './src/context/AuthContext';

const { logout } = useAuth();
logout();
```

### 3. التحقق من حالة المستخدم
```tsx
import { useAuth } from './src/context/AuthContext';

const { user, isAuthenticated } = useAuth();

if (isAuthenticated) {
  console.log('المستخدم مسجل دخوله:', user?.name);
}
```

## البيانات المحفوظة

### localStorage
- **المفتاح**: `alsharq_user`
- **القيمة**: JSON object يحتوي على:
  ```json
  {
    "id": "123",
    "name": "أحمد محمد",
    "email": "ahmed@example.com",
    "type": "student",
    "avatar": "https://ui-avatars.com/api/..."
  }
  ```

## الأمان

### 1. التحقق من البيانات
- التحقق من صحة البيانات المدخلة
- التحقق من نوع المستخدم
- التحقق من وجود البيانات المطلوبة

### 2. إدارة الجلسة
- حفظ البيانات في localStorage
- تنظيف البيانات عند تسجيل الخروج
- التحقق من صحة البيانات المحفوظة

### 3. التنقل الآمن
- التحقق من صلاحيات المستخدم
- التوجه للصفحات المناسبة
- منع الوصول غير المصرح به

## التخصيص

### 1. إضافة أنواع مستخدمين جديدة
```tsx
// في AuthContext.tsx
export type UserType = 'student' | 'teacher' | 'admin' | 'parent' | 'visitor';
```

### 2. إضافة ميزات جديدة للوحات التحكم
```tsx
// في StudentDashboard.tsx أو TeacherDashboard.tsx
const newFeature = {
  title: 'الميزة الجديدة',
  description: 'وصف الميزة',
  icon: '🆕',
  color: 'blue',
};
```

### 3. تخصيص التنقل
```tsx
// في Header.tsx
const navLinks = [
  { name: 'اسم جديد', href: '/new-page', isLink: true },
  // ...
];
```

## الاختبار

### 1. تسجيل الدخول
- [ ] اختيار نوع المستخدم
- [ ] ملء البيانات المطلوبة
- [ ] النقر على تسجيل الدخول
- [ ] التوجه للصفحة المناسبة

### 2. التنقل
- [ ] النقر على "الحياة الطلابية"
- [ ] التنقل بين الصفحات
- [ ] العودة للصفحة الرئيسية

### 3. تسجيل الخروج
- [ ] النقر على تسجيل الخروج
- [ ] العودة للصفحة الرئيسية
- [ ] إزالة بيانات المستخدم

## الخطوات التالية

1. **إضافة قاعدة بيانات**: ربط النظام بقاعدة بيانات حقيقية
2. **تحسين الأمان**: إضافة JWT tokens
3. **إضافة المزيد من الميزات**: ميزات متقدمة للوحات التحكم
4. **تحسين UX**: إضافة المزيد من التفاعلات
5. **إضافة الاختبارات**: اختبارات وحدة واختبارات تكامل

## ملاحظات

- النظام يعمل حالياً مع بيانات وهمية
- يمكن تخصيص التصميم والألوان
- جميع المكونات متوافقة مع الوضع المظلم
- النظام متجاوب ويعمل على جميع الأجهزة
- تم الحفاظ على جميع التحسينات السابقة
