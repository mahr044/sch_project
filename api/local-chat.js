// Local Chat API - ÙŠØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† API Ø®Ø§Ø±Ø¬ÙŠ
// ÙŠÙ…ÙƒÙ† ØªØ±Ù‚ÙŠØªÙ‡ Ù„Ø§Ø­Ù‚Ø§Ù‹ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Gemini Ø£Ùˆ OpenRouter

class LocalChatAPI {
  constructor() {
    this.responses = {
      // Ø§Ù„ØªØ­ÙŠØ§Øª
      'Ù…Ø±Ø­Ø¨Ø§': {
        reply: `Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ù†Ø§ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø´Ø±Ù‚. Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø¯Ø±Ø§Ø³ØªÙƒ. ÙŠÙ…ÙƒÙ†Ù†ÙŠ:\n\nâ€¢ Ø´Ø±Ø­ Ø§Ù„Ø¯Ø±ÙˆØ³ Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø¨Ø³Ø·Ø©\nâ€¢ ØªÙ„Ø®ÙŠØµ Ø§Ù„Ù…ÙˆØ§Ø¯ ÙÙŠ Ù†Ù‚Ø§Ø· ÙˆØ§Ø¶Ø­Ø©\nâ€¢ Ø§Ù‚ØªØ±Ø§Ø­ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª ØªØ¹Ù„ÙŠÙ…ÙŠØ©\nâ€¢ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ©\nâ€¢ ØªÙ‚Ø¯ÙŠÙ… Ù†ØµØ§Ø¦Ø­ Ø¯Ø±Ø§Ø³ÙŠØ©\n\nÙ…Ø§ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙŠÙ‡ØŸ`,
        videoLinks: []
      },
      
      // Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø´Ø±Ø­
      'Ø´Ø±Ø­': {
        reply: `Ø£Ù‡Ù„Ø§Ù‹! Ø³Ø£Ù‚ÙˆÙ… Ø¨Ø´Ø±Ø­ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ù„Ùƒ Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø¨Ø³Ø·Ø© ÙˆÙ…ÙÙ‡ÙˆÙ…Ø©.\n\nÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ø´Ø±Ø­Ù‡ØŒ ÙˆØ³Ø£Ù‚ÙˆÙ… Ø¨Ø´Ø±Ø­Ù‡ Ù„Ùƒ Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ© Ù…Ø¹ Ø£Ù…Ø«Ù„Ø© ØªÙˆØ¶ÙŠØ­ÙŠØ©.`,
        videoLinks: [
          'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
          'https://www.youtube.com/watch?v=example1'
        ]
      },
      
      // Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙ„Ø®ÙŠØµ
      'ØªÙ„Ø®ÙŠØµ': {
        reply: `Ø³Ø£Ù‚ÙˆÙ… Ø¨ØªÙ„Ø®ÙŠØµ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ù„Ùƒ ÙÙŠ Ù†Ù‚Ø§Ø· ÙˆØ§Ø¶Ø­Ø© ÙˆÙ…ÙÙ‡ÙˆÙ…Ø©.\n\nÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ ØªÙ„Ø®ÙŠØµÙ‡ØŒ ÙˆØ³Ø£Ù‚Ø¯Ù… Ù„Ùƒ:\nâ€¢ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©\nâ€¢ Ø§Ù„Ù…ÙØ§Ù‡ÙŠÙ… Ø§Ù„Ù…Ù‡Ù…Ø©\nâ€¢ Ø§Ù„Ø£Ù…Ø«Ù„Ø© Ø§Ù„ØªÙˆØ¶ÙŠØ­ÙŠØ©\nâ€¢ Ø§Ù„Ù†ØµØ§Ø¦Ø­ Ù„Ù„ÙÙ‡Ù…`,
        videoLinks: []
      },
      
      // Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
      'Ù…Ø³Ø§Ø¹Ø¯Ø©': {
        reply: `Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø¯Ø±Ø§Ø³ØªÙƒ! ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ:\n\nğŸ“š **Ø´Ø±Ø­ Ø§Ù„Ø¯Ø±ÙˆØ³**: Ø´Ø±Ø­ Ø£ÙŠ Ø¯Ø±Ø³ Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø¨Ø³Ø·Ø©\nğŸ“ **ØªÙ„Ø®ÙŠØµ Ø§Ù„Ù…ÙˆØ§Ø¯**: ØªÙ„Ø®ÙŠØµ Ø§Ù„Ø¯Ø±ÙˆØ³ ÙÙŠ Ù†Ù‚Ø§Ø· ÙˆØ§Ø¶Ø­Ø©\nğŸ¥ **Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª**: Ø§Ù‚ØªØ±Ø§Ø­ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ù…ÙÙŠØ¯Ø©\nâ“ **Ø§Ù„Ø£Ø³Ø¦Ù„Ø©**: Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø£Ø³Ø¦Ù„ØªÙƒ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ©\nğŸ’¡ **Ø§Ù„Ù†ØµØ§Ø¦Ø­**: ØªÙ‚Ø¯ÙŠÙ… Ù†ØµØ§Ø¦Ø­ Ø¯Ø±Ø§Ø³ÙŠØ© Ù…Ø®ØµØµØ©\n\nÙ…Ø§ Ø§Ù„Ø°ÙŠ ØªØ­ØªØ§Ø¬ Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙŠÙ‡ ØªØ­Ø¯ÙŠØ¯Ø§Ù‹ØŸ`,
        videoLinks: []
      },
      
      // Ø§Ù„Ø´ÙƒØ±
      'Ø´ÙƒØ±Ø§': {
        reply: `Ø§Ù„Ø¹ÙÙˆ! Ø£Ù†Ø§ Ø³Ø¹ÙŠØ¯ Ø¬Ø¯Ø§Ù‹ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ. ğŸ˜Š\n\nØ¥Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ Ø£ÙŠ Ø£Ø³Ø¦Ù„Ø© Ø£Ø®Ø±Ù‰ Ø£Ùˆ ØªØ­ØªØ§Ø¬ Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙŠ Ø£ÙŠ Ù…ÙˆØ¶ÙˆØ¹ØŒ ÙÙ„Ø§ ØªØªØ±Ø¯Ø¯ ÙÙŠ Ø³Ø¤Ø§Ù„ÙŠ. Ø£Ù†Ø§ Ù‡Ù†Ø§ Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø¯Ø±Ø§Ø³ØªÙƒ!\n\nØ£ØªÙ…Ù†Ù‰ Ù„Ùƒ Ø§Ù„ØªÙˆÙÙŠÙ‚ ÙˆØ§Ù„Ù†Ø¬Ø§Ø­! ğŸ“âœ¨`,
        videoLinks: []
      },
      
      // Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª
      'Ø±ÙŠØ§Ø¶ÙŠØ§Øª': {
        reply: `Ø£Ù‡Ù„Ø§Ù‹! Ø³Ø£Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª. ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø´Ø±Ø­:\n\nğŸ”¢ **Ø§Ù„Ø¬Ø¨Ø±**: Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª ÙˆØ§Ù„Ù…ØªØºÙŠØ±Ø§Øª\nğŸ“ **Ø§Ù„Ù‡Ù†Ø¯Ø³Ø©**: Ø§Ù„Ø£Ø´ÙƒØ§Ù„ ÙˆØ§Ù„Ø²ÙˆØ§ÙŠØ§\nğŸ“Š **Ø§Ù„Ø¥Ø­ØµØ§Ø¡**: Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ©\nğŸ“ˆ **Ø§Ù„ØªÙØ§Ø¶Ù„ ÙˆØ§Ù„ØªÙƒØ§Ù…Ù„**: Ù„Ù„Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©\n\nÙ…Ø§ Ù‡Ùˆ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ø´Ø±Ø­Ù‡ ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§ØªØŸ`,
        videoLinks: [
          'https://www.youtube.com/watch?v=math1',
          'https://www.youtube.com/watch?v=math2'
        ]
      },
      
      // Ø§Ù„Ø¹Ù„ÙˆÙ…
      'Ø¹Ù„ÙˆÙ…': {
        reply: `Ø£Ù‡Ù„Ø§Ù‹! Ø³Ø£Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø§Ù„Ø¹Ù„ÙˆÙ…. ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø´Ø±Ø­:\n\nâš—ï¸ **Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡**: Ø§Ù„Ø¹Ù†Ø§ØµØ± ÙˆØ§Ù„ØªÙØ§Ø¹Ù„Ø§Øª\nğŸ”¬ **Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡**: Ø§Ù„Ù‚ÙˆÙ‰ ÙˆØ§Ù„Ø·Ø§Ù‚Ø©\nğŸ§¬ **Ø§Ù„Ø£Ø­ÙŠØ§Ø¡**: Ø§Ù„ÙƒØ§Ø¦Ù†Ø§Øª Ø§Ù„Ø­ÙŠØ©\nğŸŒ **Ø¹Ù„ÙˆÙ… Ø§Ù„Ø£Ø±Ø¶**: Ø§Ù„Ø¨ÙŠØ¦Ø© ÙˆØ§Ù„Ø·Ø¨ÙŠØ¹Ø©\n\nÙ…Ø§ Ù‡Ùˆ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ø´Ø±Ø­Ù‡ ÙÙŠ Ø§Ù„Ø¹Ù„ÙˆÙ…ØŸ`,
        videoLinks: [
          'https://www.youtube.com/watch?v=science1',
          'https://www.youtube.com/watch?v=science2'
        ]
      },
      
      // Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
      'Ø¹Ø±Ø¨ÙŠ': {
        reply: `Ø£Ù‡Ù„Ø§Ù‹! Ø³Ø£Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©. ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø´Ø±Ø­:\n\nğŸ“– **Ø§Ù„Ù†Ø­Ùˆ**: Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©\nâœï¸ **Ø§Ù„ØµØ±Ù**: ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙƒÙ„Ù…Ø§Øª\nğŸ“š **Ø§Ù„Ø£Ø¯Ø¨**: Ø§Ù„Ø´Ø¹Ø± ÙˆØ§Ù„Ù†Ø«Ø±\nğŸ—£ï¸ **Ø§Ù„Ø¨Ù„Ø§ØºØ©**: ÙÙ†ÙˆÙ† Ø§Ù„ÙƒÙ„Ø§Ù…\n\nÙ…Ø§ Ù‡Ùˆ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ø´Ø±Ø­Ù‡ ÙÙŠ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©ØŸ`,
        videoLinks: [
          'https://www.youtube.com/watch?v=arabic1'
        ]
      },
      
      // Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
      'Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠ': {
        reply: `Hello! I can help you with English. I can explain:\n\nğŸ“ **Grammar**: Rules and structures\nğŸ“š **Vocabulary**: Words and meanings\nğŸ—£ï¸ **Conversation**: Speaking skills\nâœï¸ **Writing**: Composition and essays\n\nWhat topic would you like help with in English?`,
        videoLinks: [
          'https://www.youtube.com/watch?v=english1'
        ]
      },
      
      // Ø£Ø³Ø¦Ù„Ø© ÙƒÙŠÙ
      'ÙƒÙŠÙ': {
        reply: `Ø³Ø£Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ ÙÙ‡Ù… ÙƒÙŠÙÙŠØ© Ø­Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©.\n\nÙŠØ±Ø¬Ù‰ ØªÙˆØ¶ÙŠØ­ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø£ÙƒØ«Ø± Ø­ØªÙ‰ Ø£ØªÙ…ÙƒÙ† Ù…Ù† Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø¨Ø´ÙƒÙ„ Ø£ÙØ¶Ù„. ÙŠÙ…ÙƒÙ†Ùƒ Ø£Ù† ØªØ³Ø£Ù„:\nâ€¢ ÙƒÙŠÙ Ø£Ø­Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø³Ø£Ù„Ø©ØŸ\nâ€¢ ÙƒÙŠÙ Ø£ÙÙ‡Ù… Ù‡Ø°Ø§ Ø§Ù„Ù…ÙÙ‡ÙˆÙ…ØŸ\nâ€¢ ÙƒÙŠÙ Ø£Ø¯Ø±Ø³ Ø¨ÙØ¹Ø§Ù„ÙŠØ©ØŸ`,
        videoLinks: []
      },
      
      // Ø£Ø³Ø¦Ù„Ø© Ù…ØªÙ‰
      'Ù…ØªÙ‰': {
        reply: `Ø³Ø£Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ù…Ø¹Ø±ÙØ© Ø§Ù„ØªÙˆÙ‚ÙŠØª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨.\n\nÙ‡Ù„ ØªÙ‚ØµØ¯:\nâ€¢ Ù…ØªÙ‰ Ù…ÙˆØ¹Ø¯ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†ØŸ\nâ€¢ Ù…ØªÙ‰ Ø£ÙØ¶Ù„ ÙˆÙ‚Øª Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©ØŸ\nâ€¢ Ù…ØªÙ‰ ÙŠØ¬Ø¨ Ø£Ù† Ø£Ø¨Ø¯Ø£ Ø§Ù„Ø¯Ø±Ø§Ø³Ø©ØŸ`,
        videoLinks: []
      },
      
      // Ø£Ø³Ø¦Ù„Ø© Ø£ÙŠÙ†
      'Ø£ÙŠÙ†': {
        reply: `Ø³Ø£Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø©.\n\nÙ‡Ù„ ØªÙ‚ØµØ¯:\nâ€¢ Ø£ÙŠÙ† Ø£Ø¬Ø¯ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø© ÙÙŠ Ø§Ù„ÙƒØªØ§Ø¨ØŸ\nâ€¢ Ø£ÙŠÙ† Ø£Ø¬Ø¯ Ù…ØµØ§Ø¯Ø± Ø¥Ø¶Ø§ÙÙŠØ©ØŸ\nâ€¢ Ø£ÙŠÙ† Ø£Ø¬Ø¯ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª ØªØ¹Ù„ÙŠÙ…ÙŠØ©ØŸ`,
        videoLinks: []
      },
      
      // Ø£Ø³Ø¦Ù„Ø© Ù„Ù…Ø§Ø°Ø§
      'Ù„Ù…Ø§Ø°Ø§': {
        reply: `Ø³Ø£Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ ÙÙ‡Ù… Ø§Ù„Ø³Ø¨Ø¨.\n\nÙ‡Ø°Ø§ Ø³Ø¤Ø§Ù„ Ù…Ù…ØªØ§Ø²! ÙŠØ±Ø¬Ù‰ ØªÙˆØ¶ÙŠØ­ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø£ÙƒØ«Ø± Ø­ØªÙ‰ Ø£ØªÙ…ÙƒÙ† Ù…Ù† Ø´Ø±Ø­ Ø§Ù„Ø³Ø¨Ø¨ Ø¨Ø´ÙƒÙ„ ÙˆØ§Ø¶Ø­ ÙˆÙ…ÙÙ‡ÙˆÙ….`,
        videoLinks: []
      },
      
      // Ø§Ù„Ø±Ø¯ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
      'default': {
        reply: `Ø´ÙƒØ±Ø§Ù‹ Ù„Ø³Ø¤Ø§Ù„Ùƒ! Ø£Ù†Ø§ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø´Ø±Ù‚.\n\nÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ:\n\nğŸ“š **Ø´Ø±Ø­ Ø§Ù„Ø¯Ø±ÙˆØ³**: Ø£ÙŠ Ø¯Ø±Ø³ ØªØ±ÙŠØ¯Ù‡\nğŸ“ **ØªÙ„Ø®ÙŠØµ Ø§Ù„Ù…ÙˆØ§Ø¯**: ÙÙŠ Ù†Ù‚Ø§Ø· ÙˆØ§Ø¶Ø­Ø©\nğŸ¥ **Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª**: Ø§Ù‚ØªØ±Ø§Ø­ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª ØªØ¹Ù„ÙŠÙ…ÙŠØ©\nâ“ **Ø§Ù„Ø£Ø³Ø¦Ù„Ø©**: Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø£Ø³Ø¦Ù„ØªÙƒ\nğŸ’¡ **Ø§Ù„Ù†ØµØ§Ø¦Ø­**: Ù†ØµØ§Ø¦Ø­ Ø¯Ø±Ø§Ø³ÙŠØ© Ù…ÙÙŠØ¯Ø©\n\nÙ…Ø§ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙŠÙ‡ ØªØ­Ø¯ÙŠØ¯Ø§Ù‹ØŸ`,
        videoLinks: [
          'https://www.youtube.com/watch?v=example2',
          'https://www.youtube.com/watch?v=example3'
        ]
      }
    };
  }

  // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙˆØ¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ø±Ø¯ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨
  analyzeMessage(message, subject = 'Ø¹Ø§Ù…') {
    const lowerMessage = message.toLowerCase();
    
    // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ©
    if (lowerMessage.includes('Ù…Ø±Ø­Ø¨Ø§') || lowerMessage.includes('hello') || lowerMessage.includes('Ø£Ù‡Ù„Ø§') || lowerMessage.includes('Ø§Ù„Ø³Ù„Ø§Ù…')) {
      return this.responses['Ù…Ø±Ø­Ø¨Ø§'];
    }
    else if (lowerMessage.includes('Ø´ÙƒØ±Ø§') || lowerMessage.includes('Ø´ÙƒØ±Ø§Ù‹') || lowerMessage.includes('thanks')) {
      return this.responses['Ø´ÙƒØ±Ø§'];
    }
    else if (lowerMessage.includes('Ø´Ø±Ø­') || lowerMessage.includes('explain') || lowerMessage.includes('ÙˆØ¶Ø­')) {
      return this.responses['Ø´Ø±Ø­'];
    }
    else if (lowerMessage.includes('ØªÙ„Ø®ÙŠØµ') || lowerMessage.includes('summary') || lowerMessage.includes('Ù…Ù„Ø®Øµ')) {
      return this.responses['ØªÙ„Ø®ÙŠØµ'];
    }
    else if (lowerMessage.includes('Ù…Ø³Ø§Ø¹Ø¯Ø©') || lowerMessage.includes('help') || lowerMessage.includes('Ø³Ø§Ø¹Ø¯')) {
      return this.responses['Ù…Ø³Ø§Ø¹Ø¯Ø©'];
    }
    else if (lowerMessage.includes('ÙƒÙŠÙ') || lowerMessage.includes('how')) {
      return this.responses['ÙƒÙŠÙ'];
    }
    else if (lowerMessage.includes('Ù…ØªÙ‰') || lowerMessage.includes('when')) {
      return this.responses['Ù…ØªÙ‰'];
    }
    else if (lowerMessage.includes('Ø£ÙŠÙ†') || lowerMessage.includes('where')) {
      return this.responses['Ø£ÙŠÙ†'];
    }
    else if (lowerMessage.includes('Ù„Ù…Ø§Ø°Ø§') || lowerMessage.includes('why')) {
      return this.responses['Ù„Ù…Ø§Ø°Ø§'];
    }
    else if (lowerMessage.includes('Ø±ÙŠØ§Ø¶ÙŠØ§Øª') || lowerMessage.includes('math') || lowerMessage.includes('Ø­Ø³Ø§Ø¨')) {
      return this.responses['Ø±ÙŠØ§Ø¶ÙŠØ§Øª'];
    }
    else if (lowerMessage.includes('Ø¹Ù„ÙˆÙ…') || lowerMessage.includes('science') || lowerMessage.includes('ÙÙŠØ²ÙŠØ§Ø¡') || lowerMessage.includes('ÙƒÙŠÙ…ÙŠØ§Ø¡')) {
      return this.responses['Ø¹Ù„ÙˆÙ…'];
    }
    else if (lowerMessage.includes('Ø¹Ø±Ø¨ÙŠ') || lowerMessage.includes('arabic') || lowerMessage.includes('Ù†Ø­Ùˆ') || lowerMessage.includes('Ø£Ø¯Ø¨')) {
      return this.responses['Ø¹Ø±Ø¨ÙŠ'];
    }
    else if (lowerMessage.includes('Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠ') || lowerMessage.includes('english') || lowerMessage.includes('Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ')) {
      return this.responses['Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠ'];
    }
    else {
      return this.responses['default'];
    }
  }

  // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø®ÙŠØ± Ù…Ø­Ø§ÙƒÙŠ Ù„Ù„ÙˆØ§Ù‚Ø¹
  async simulateDelay() {
    const delay = 1000 + Math.random() * 2000; // 1-3 Ø«ÙˆØ§Ù†ÙŠ
    return new Promise(resolve => setTimeout(resolve, delay));
  }

  // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
  async processMessage(message, studentId, subject = 'Ø¹Ø§Ù…') {
    try {
      // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ£Ø®ÙŠØ± API
      await this.simulateDelay();
      
      // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
      const response = this.analyzeMessage(message, subject);
      
      // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©
      return {
        ...response,
        timestamp: new Date().toISOString(),
        studentId,
        subject,
        messageId: Date.now().toString()
      };
      
    } catch (error) {
      console.error('Local Chat API Error:', error);
      return {
        reply: 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø·Ù„Ø¨Ùƒ. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.',
        videoLinks: [],
        timestamp: new Date().toISOString(),
        error: true
      };
    }
  }
}

// Ø¥Ù†Ø´Ø§Ø¡ instance ÙˆØ§Ø­Ø¯ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
const localChatAPI = new LocalChatAPI();

// ØªØµØ¯ÙŠØ± Ø§Ù„Ø¯ÙˆØ§Ù„
export { localChatAPI };
export default localChatAPI;
